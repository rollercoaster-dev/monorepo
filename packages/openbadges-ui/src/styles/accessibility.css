/**
 * Rollercoaster.dev Open Badges Component Library - Accessibility Styles
 *
 * This file provides additional CSS to enhance accessibility across components.
 */

/* Visually hidden content (for screen readers) */
.ob-visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Focus styles */
.ob-focus-visible:focus-visible {
  outline: var(--ob-border-width-medium) solid var(--ob-border-color-focus);
  outline-offset: var(--ob-border-offset);
}

/* Ensure all interactive elements have visible focus states */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[tabindex]:focus-visible {
  outline: var(--ob-border-width-medium) solid var(--ob-border-color-focus);
  outline-offset: var(--ob-border-offset);
}

/* Skip link for keyboard users */
.ob-skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--ob-primary);
  color: var(--ob-text-inverse);
  padding: var(--ob-space-2);
  z-index: var(--ob-z-index-modal);
  transition: top var(--ob-transition-fast);
}

.ob-skip-link:focus {
  top: 0;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* High contrast mode support */
@media (forced-colors: active) {
  .ob-badge-display,
  .ob-badge-list-item,
  .ob-profile-viewer,
  .ob-badge-issuer-form,
  .ob-issuer-dashboard {
    border: var(--ob-border-width) solid CanvasText;
  }

  .ob-button {
    border: var(--ob-border-width) solid CanvasText;
  }

  .ob-tab-button.active {
    border-bottom: var(--ob-borderWidth-thick) solid CanvasText;
  }
}

/* Improve text readability */
.ob-badge-description,
.ob-profile-description,
.ob-form-label,
.ob-form-help {
  max-width: 65ch; /* Optimal line length for readability */
}

/* Ensure sufficient color contrast */
.ob-form-error {
  color: var(--ob-error);
  font-weight: var(--ob-font-weight-medium);
}

.ob-form-success {
  color: var(--ob-success);
  font-weight: var(--ob-font-weight-medium);
}

/* Ensure form fields have sufficient spacing for touch targets */
.ob-form-input,
.ob-form-textarea,
.ob-button,
.ob-tab-button {
  min-height: 44px; /* Minimum touch target size */
}

/* Improve focus visibility for form elements */
.ob-form-input:focus,
.ob-form-textarea:focus {
  outline: none;
  border-color: var(--ob-form-input-focus);
  box-shadow: var(--ob-shadow-focus);
}

/* Status messages for screen readers */
.ob-status {
  border-radius: var(--ob-border-radius-md);
  padding: var(--ob-space-2) var(--ob-space-3);
  margin-top: var(--ob-space-4);
}

.ob-status[aria-live="polite"] {
  background-color: var(--ob-info-light);
  color: var(--ob-text-primary);
}

.ob-status[role="alert"] {
  background-color: var(--ob-error-light);
  color: var(--ob-text-primary);
}

.ob-status[role="status"] {
  background-color: var(--ob-success-light);
  color: var(--ob-text-primary);
}

/* Neurodiversity-specific styles */

/* Content density adjustments */
.ob-density-compact {
  --ob-space-1: 0.125rem;
  --ob-space-2: 0.25rem;
  --ob-space-3: 0.5rem;
  --ob-space-4: 0.75rem;
  --ob-space-5: 1rem;
  --ob-space-6: 1.25rem;
  --ob-space-8: 1.5rem;
  --ob-space-10: 2rem;
  --ob-space-12: 2.5rem;
  --ob-space-16: 3rem;
}

.ob-density-spacious {
  --ob-space-1: 0.5rem;
  --ob-space-2: 0.75rem;
  --ob-space-3: 1rem;
  --ob-space-4: 1.5rem;
  --ob-space-5: 2rem;
  --ob-space-6: 2.5rem;
  --ob-space-8: 3rem;
  --ob-space-10: 3.5rem;
  --ob-space-12: 4rem;
  --ob-space-16: 5rem;
  --ob-line-height-normal: 1.8;
  --ob-line-height-relaxed: 2;
}

/* Focus mode to reduce distractions */
.ob-focus-mode {
  /* Dim non-focused content */
  --ob-focus-mode-opacity: 0.7;
  --ob-focus-mode-transition: opacity var(--ob-transition-normal) ease;
}

.ob-focus-mode .ob-badge-list-item:not(:hover):not(:focus-within),
.ob-focus-mode .ob-form-group:not(:focus-within) {
  opacity: var(--ob-focus-mode-opacity);
  transition: var(--ob-focus-mode-transition);
}

.ob-focus-mode .ob-badge-list-item:hover,
.ob-focus-mode .ob-badge-list-item:focus-within,
.ob-focus-mode .ob-form-group:focus-within {
  opacity: 1;
  transition: var(--ob-focus-mode-transition);
  box-shadow: var(--ob-shadow-focus);
}

/* Animation control for vestibular disorders and sensory sensitivities */
.ob-animations-none * {
  animation: none !important;
  transition: none !important;
  scroll-behavior: auto !important;
}

.ob-animations-minimal * {
  animation-duration: var(--ob-transition-normal) !important;
  transition-duration: var(--ob-transition-normal) !important;
}

/* Reading modes for dyslexia and visual processing */

/* Bionic reading - highlight first part of words to aid reading flow */
.ob-reading-bionic p,
.ob-reading-bionic li,
.ob-reading-bionic h1,
.ob-reading-bionic h2,
.ob-reading-bionic h3,
.ob-reading-bionic h4,
.ob-reading-bionic h5,
.ob-reading-bionic h6 {
  font-weight: var(--ob-font-weight-normal);
}

.ob-reading-bionic p span.ob-bionic-highlight,
.ob-reading-bionic li span.ob-bionic-highlight,
.ob-reading-bionic h1 span.ob-bionic-highlight,
.ob-reading-bionic h2 span.ob-bionic-highlight,
.ob-reading-bionic h3 span.ob-bionic-highlight,
.ob-reading-bionic h4 span.ob-bionic-highlight,
.ob-reading-bionic h5 span.ob-bionic-highlight,
.ob-reading-bionic h6 span.ob-bionic-highlight {
  font-weight: var(--ob-font-weight-bold);
}

/* Reading ruler - helps track lines of text */
.ob-reading-ruler {
  --ob-ruler-height: 2.5em;
  --ob-ruler-color: rgba(255, 255, 0, 0.1);
  --ob-ruler-border: rgba(0, 0, 0, 0.1);
  cursor:
    url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"><rect x="0" y="14" width="32" height="4" fill="yellow" opacity="0.3"/></svg>'),
    auto;
}

/* Paragraph focus - highlights the paragraph being read */
.ob-reading-paragraph-focus p:hover,
.ob-reading-paragraph-focus li:hover {
  background-color: rgba(255, 255, 0, 0.1);
  border-radius: var(--ob-border-radius-md);
  transition: background-color var(--ob-transition-normal) ease;
}

/* Number formatting for dyscalculia */
.ob-number-separator {
  color: var(--ob-secondary);
  margin: 0 0.1em;
  font-weight: normal;
}

.ob-number-highlight {
  font-weight: bold;
  color: var(--ob-primary);
}

/* Font Family Utility Classes */
.ob-font-dyslexic {
  font-family: var(--ob-font-opendyslexic);
  letter-spacing: var(--ob-letter-spacing);
  word-spacing: var(--ob-word-spacing);
}

.ob-font-accessible {
  font-family: var(--ob-font-atkinson);
}

.ob-font-readable {
  font-family: var(--ob-font-lexend);
  letter-spacing: 0.01em;
}

.ob-font-standard {
  font-family: var(--ob-font-inter);
}

/* Text Spacing Adjustments for Cognitive Accessibility */
.ob-text-spacing-enhanced {
  line-height: var(--ob-line-height-relaxed);
  letter-spacing: var(--ob-letter-spacing);
  word-spacing: var(--ob-word-spacing);
}

/* Font Size Adjustments */
.ob-text-size-base {
  font-size: var(--ob-font-size-md);
}

.ob-text-size-large {
  font-size: var(--ob-font-size-lg);
}

.ob-text-size-xl {
  font-size: var(--ob-font-size-xl);
}

/* Ensure sufficient touch target size for mobile */
@media (pointer: coarse) {
  .ob-touch-target {
    min-height: 44px;
    min-width: 44px;
  }
}
